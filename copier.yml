# Copier template configuration
_templates_suffix: .jinja
_envops:
  block_start_string: "{%"
  block_end_string: "%}"
  variable_start_string: "{{"
  variable_end_string: "}}"

# Template metadata
_metadata:
  title: "UV Python Project Template"
  description: "A professional Python project template using UV for dependency management with comprehensive tooling"
  version: "1.0.0"
  author: "Automated Generation"
  homepage: "https://github.com/ac-willeke/uv-template"

# Core project information
project_name:
  type: str
  help: "What is your project name? (e.g., My Awesome Package)"
  validator: "{% if not project_name %}Required field{% endif %}"

package_name:
  type: str
  help: "What is your Python package name? (snake_case, e.g., my_awesome_package)"
  default: "{{ project_name|lower|replace(' ', '_')|replace('-', '_') }}"
  validator: "{% if not package_name.replace('_', '').isalnum() %}Package name must be alphanumeric with underscores only{% endif %}"

distribution_name:
  type: str
  default: "{{ package_name|replace('_', '-') }}"
  when: false

project_description:
  type: str
  help: "Briefly describe your project"
  default: "A Python project built with UV"

# Author information
author_name:
  type: str
  help: "What is your full name?"
  validator: "{% if not author_name %}Required field{% endif %}"

author_email:
  type: str
  help: "What is your email address?"
  validator: "{% if not author_email or '@' not in author_email %}Please enter a valid email address{% endif %}"

github_username:
  type: str
  help: "What is your GitHub username?"
  validator: "{% if not github_username %}Required field{% endif %}"

# Technical configuration
python_version:
  type: str
  help: "Minimum Python version"
  default: "3.12"
  choices:
    - "3.10"
    - "3.11"
    - "3.12"
    - "3.13"

license:
  type: str
  help: "Choose a license"
  default: "MIT"
  choices:
    - "MIT"
    - "Apache-2.0"
    - "GPL-3.0"
    - "BSD-3-Clause"

# Optional features
include_docker:
  type: bool
  help: "Include Docker configuration (Dockerfile, compose.yml, .devcontainer)?"
  default: true

include_notebooks:
  type: bool
  help: "Include Jupyter notebook support and demo notebook?"
  default: true

include_docs:
  type: bool
  help: "Include comprehensive documentation folder?"
  default: true

include_copilot:
  type: bool
  help: "Include GitHub Copilot instructions file?"
  default: true

# Post-generation hooks

_tasks:
  # Initialize git repository
  - command: "git init"
    when: "{{ _copier_conf.src_path != _copier_conf.dst_path }}"

  # Add all files to git
  - command: "git add ."
    when: "{{ _copier_conf.src_path != _copier_conf.dst_path }}"

  # Create initial commit
  - command: 'git commit -m "Initial commit from UV Python template"'
    when: "{{ _copier_conf.src_path != _copier_conf.dst_path }}"

  # Display post-generation instructions
  - command: "echo"
    args:
      - |

        ðŸŽ‰ Successfully generated {{ project_name }}!

        Next steps:
        1. Navigate to the project: cd {{ distribution_name }}
        2. Install dependencies: uv sync --group dev
        3. Set up pre-commit hooks: uv run pre-commit install
        4. Run tests: uv run pytest
        5. Start developing: code .
        {% if include_docs %}
        - For detailed setup instructions, see docs/setup-guide.md
        - For a quick start guide, see docs/demo-quickstart.md
        - For command reference, see docs/command-cheatsheet.md
        {% endif %}
    when: "{{ _copier_conf.src_path != _copier_conf.dst_path }}"
